# TODO - 概念マッピングツール改善ロードマップ

## 🎯 短期目標（1-2週間）

### 1. 複数セクション対応の基本実装
- [ ] 複数ディレクトリ一括処理機能
  - 章ディレクトリ内の複数セクションファイルを自動認識
  - 各セクションを個別処理後、統合graph.jsonを生成
- [ ] セクションメタデータの追加
  - section_id、chapter_id、順序情報をConceptとEdgeに追加
  - 階層的な概念組織を実現

### 2. WebUI セクション切り替え機能
- [ ] セクション選択サイドバーの実装
  - 章・セクションのツリー表示
  - クリックでグラフ表示を切り替え
- [ ] 表示レベルコントロール
  - 全体概観モード（核心概念のみ）
  - セクション詳細モード（全概念表示）
  - 章間関係表示モード

### 3. 概念階層化の改善
- [ ] 重要度スコアリングシステム
  - セクション内での概念重要度
  - 章レベルでの核心概念選定
  - 書籍全体での最重要概念抽出
- [ ] 動的max_concepts調整
  - 階層レベルに応じた概念数制限
  - --book-concepts, --chapter-concepts, --section-concepts オプション

## 📊 中期目標（3-4週間）

### 4. 章間関係分析機能
- [ ] クロスセクション関係の拡張
  - 章をまたぐ概念の関連性分析
  - 概念の発展・深化の追跡
- [ ] 関係スコープフィールドの追加
  - "within_section", "cross_section", "cross_chapter"
  - source_chapter, target_chapter情報

### 5. 高度な可視化機能
- [ ] プログレッシブディスクロージャーUI
  - ズームレベルに応じた概念の表示/非表示
  - 関係の重要度による段階的表示
- [ ] 概念検索・フィルタリング
  - 概念名、定義、証拠からの全文検索
  - 章、セクション、重要度でのフィルタリング
- [ ] 学習パス表示
  - prerequisite関係に基づく推奨学習順序
  - 概念依存グラフの生成

### 6. データ構造の拡張
- [ ] BookGraphデータモデルの実装
  ```python
  @dataclass
  class BookGraph:
      title: str
      chapters: List[ChapterGraph]
      book_concepts: List[Concept]  # 書籍レベル核心概念
      cross_chapter_edges: List[Edge]
  ```
- [ ] 章・セクション階層の明示化

## 🚀 長期目標（1-2ヶ月）

### 7. インタラクティブ編集機能
- [ ] 概念・関係の手動追加/編集
- [ ] 誤抽出の修正機能
- [ ] ユーザーアノテーション機能

### 8. エクスポート・共有機能
- [ ] 章別エクスポート
- [ ] 学習用PDF生成（概念マップ付き）
- [ ] 共有可能な静的HTMLの生成
- [ ] Obsidian/Roam Research形式エクスポート

### 9. 多言語対応の強化
- [ ] 言語別プロンプトテンプレート
- [ ] 多言語混在文書の処理
- [ ] 翻訳支援機能

### 10. パフォーマンス最適化
- [ ] 大規模文書（1000+概念）への対応
- [ ] インクリメンタル処理（差分更新）
- [ ] キャッシュシステムの実装
- [ ] バッチ処理の並列化

## 🔧 技術的改善

### バックエンド改善
- [ ] エラーハンドリングの強化
- [ ] ログシステムの実装
- [ ] テストカバレッジの向上
- [ ] 設定ファイル（.conceptmaprc）のサポート

### フロントエンド改善  
- [ ] TypeScript型定義の完全化
- [ ] コンポーネントの単体テスト
- [ ] アクセシビリティ対応（WCAG準拠）
- [ ] モバイル対応の改善

## 📝 ドキュメント整備
- [ ] APIドキュメントの作成
- [ ] プロンプトカスタマイズガイド
- [ ] ベストプラクティス集
- [ ] トラブルシューティングガイド

## 💡 実験的機能

### AI連携の拡張
- [ ] 概念間の類似度計算
- [ ] 欠落している関係の推論・提案
- [ ] 概念の自動クラスタリング
- [ ] 要約・説明文の自動生成

### 視覚化の革新
- [ ] 3D概念マップ表示
- [ ] タイムライン表示（概念の発展史）
- [ ] マインドマップスタイル表示
- [ ] 力学シミュレーションの改善

---

## 優先度凡例
- 🔴 緊急: 基本機能に必要
- 🟡 重要: ユーザビリティ向上に必要
- 🟢 改善: あると便利な機能

## 現在の進捗
- ✅ 関係表現の自然言語化（2025-09-09）
- ✅ relation/relation_descriptionフィールドの分離（2025-09-09）
- ✅ tierフィールドの動的化構想（2025-09-09）

---

最終更新: 2025-09-09